<!-- Responder Status -->
<label for="responderStatus">Are you a responder or civilian?</label>
<select name="responderStatus" id="responderStatus" required onchange="toggleResponderFields(this.value)">
  <option value="" disabled selected>Select responder status</option>
  <option value="Responder">Responder</option>
  <option value="Civilian">Civilian</option>
</select>

<!-- Responder Fields -->
<div id="responderFields" style="display: none; margin-top: 10px;">
  <label for="responderType">Type of Responder</label>
  <select name="responderType" id="responderType" onchange="toggleFireFields(this.value)">
    <option value="" disabled selected>Select responder type</option>
    <option value="Fire">Fire</option>
    <option value="EMS">EMS</option>
    <option value="LEO">Law Enforcement</option>
    <option value="Military">Military</option>
    <option value="Other">Other</option>
  </select>
</div>

<!-- Civilian Fields -->
<div id="civilianFields" style="display: none; margin-top: 10px;">
  <label for="prepperStatus">Are you a preparedness-minded civilian?</label>
  <select name="prepperStatus" id="prepperStatus">
    <option value="" disabled selected>Select prepper status</option>
    <option value="Yes">Yes</option>
    <option value="No">No</option>
    <option value="Somewhat">Somewhat</option>
  </select>
</div>

<!-- Fire-Specific Fields -->
<div id="fireFields" style="display: none; margin-top: 10px;">
  <label for="fireCareerType">Career or Volunteer?</label>
  <select name="fireCareerType" id="fireCareerType">
    <option value="" disabled selected>Select career type</option>
    <option value="Career">Career</option>
    <option value="Volunteer">Volunteer</option>
    <option value="Combination">Combination</option>
  </select>
</div>

<!-- JavaScript Logic -->
<script>
  const responderFields = document.getElementById('responderFields');
  const civilianFields = document.getElementById('civilianFields');
  const fireFields = document.getElementById('fireFields');
  const responderTypeSelect = document.getElementById('responderType');

  function toggleResponderFields(status) {
    if (status === 'Responder') {
      responderFields.style.display = 'block';
      civilianFields.style.display = 'none';
    } else if (status === 'Civilian') {
      responderFields.style.display = 'none';
      civilianFields.style.display = 'block';
    } else {
      responderFields.style.display = 'none';
      civilianFields.style.display = 'none';
    }

    // Reset nested logic when switching
    responderTypeSelect.value = '';
    toggleFireFields('');
  }

  function toggleFireFields(type) {
    if (type === 'Fire') {
      fireFields.style.display = 'block';
    } else {
      fireFields.style.display = 'none';
    }
  }

  // Ensure form is reset to clean state on load
  window.addEventListener('DOMContentLoaded', () => {
    document.getElementById('responderStatus').value = '';
    responderTypeSelect.value = '';
    document.getElementById('prepperStatus').value = '';
    document.getElementById('fireCareerType').value = '';
    toggleResponderFields('');
    toggleFireFields('');
  });
</script>
